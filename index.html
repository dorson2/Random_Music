<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mood Music Player - Random Playlist</title>
<style>
  :root { --glass-bg: rgba(255,255,255,0.9); --glass-hover: rgba(255,255,255,1); }
  body { margin:0; padding:20px; min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif; color:white; text-align:center; background-color:#111; background-size:cover; background-position:center; transition:background-image 1s ease-in-out; position:relative; }
  body::before { content:""; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:1; }
  h1,.buttons,#player { position:relative; z-index:10; }
  h1 { font-size:2.5rem; font-weight:800; margin-bottom:30px; text-shadow:0 4px 15px rgba(0,0,0,0.5); }
  .buttons { display:flex; flex-wrap:wrap; gap:15px; justify-content:center; margin-bottom:40px; }
  button { padding:16px 32px; font-size:1.1rem; font-weight:700; cursor:pointer; border:none; border-radius:20px; background:var(--glass-bg); color:#111; transition:all 0.3s cubic-bezier(0.4,0,0.2,1); box-shadow:0 8px 20px rgba(0,0,0,0.3); }
  button:hover { transform:translateY(-5px) scale(1.05); background:var(--glass-hover); box-shadow:0 12px 30px rgba(0,0,0,0.4); }
  #player { width:100%; max-width:600px; aspect-ratio:16/9; background:#000; border-radius:25px; overflow:hidden; box-shadow:0 25px 60px rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; }
  @media(max-width:480px){ h1{font-size:1.8rem;} button{padding:12px 20px;font-size:0.9rem;} }
</style>
</head>
<body>

<h1>Music for youğŸ¶</h1>

<div class="buttons">
  <button onclick="startPlaylist('HOUSE')">ğŸ· Deep/Jazzy House</button>
  <button onclick="startPlaylist('TECHNO')">ğŸ› Minimal Techno</button>
</div>

<div id="player"><div class="placeholder">Select a genre to start the vibe</div></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player;
let currentPlaylist = [];
let currentIndex = 0;

// í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì„¤ì •
const playlists = {
  'HOUSE': {
    id: 'PLwOTNSbCnP6tikjuYRoUWxWj9JTUelM0_', // Deep/Jazzy House
  },
  'TECHNO': {
    id: 'PLwOTNSbCnP6tNK02AIed3KYt7UGcCe4T_', // Minimal Techno
  }
};

// YouTube IFrame API ë¡œë“œ í›„ í”Œë ˆì´ì–´ ìƒì„±
function onYouTubeIframeAPIReady() {
  player = new YT.Player('player', {
    height: '100%',
    width: '100%',
    events: { 'onStateChange': onPlayerStateChange }
  });
}

// ì˜ìƒ ëë‚˜ë©´ ë‹¤ìŒ ëœë¤ ì˜ìƒ ì¬ìƒ
function onPlayerStateChange(event) {
  if(event.data === YT.PlayerState.ENDED) {
    currentIndex++;
    if(currentIndex < currentPlaylist.length){
      player.loadVideoById(currentPlaylist[currentIndex]);
    }
  }
}

// ë²„íŠ¼ í´ë¦­ ì‹œ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ëœë¤ 10ê³¡ ìƒì„± í›„ ì¬ìƒ
function startPlaylist(genre){
  updateBg();

  const playlistId = playlists[genre].id;

  // YouTube Data API ì—†ì´ ê°„ë‹¨í•˜ê²Œ indexë§Œ ì‚¬ìš© â†’ 10ê³¡ ëœë¤
  currentPlaylist = [];
  for(let i=0;i<10;i++){
    const randomIndex = Math.floor(Math.random()*20) + 1; // ì´ 20ê³¡ ê°€ì •
    currentPlaylist.push(`${playlistId}&index=${randomIndex}`);
  }
  currentIndex = 0;

  player.loadVideoById(currentPlaylist[currentIndex]);
}

// ëœë¤ ë°°ê²½
function updateBg() {
  const seed = Math.floor(Math.random() * 10000);
  const imageUrl = `https://picsum.photos/seed/${seed}/1920/1080`;
  const img = new Image();
  img.src = imageUrl;
  img.onload = () => { document.body.style.backgroundImage = `url('${imageUrl}')`; }
}
</script>

</body>
</html>
